{"ast":null,"code":"import _objectSpread from\"/home/katjaker/FullStack/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/katjaker/FullStack/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import contactService from'./services/contacts';import Filter from'./components/Filter';import Add from'./components/Add';import Persons from'./components/Persons';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searched=_useState8[0],setSearched=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),successMessage=_useState12[0],setSuccessMessage=_useState12[1];useEffect(function(){contactService.getAll().then(function(initialContacts){setPersons(initialContacts);});},[]);var addNew=function addNew(event){event.preventDefault();if(newName.length===0||newNumber.length===0){alert(\"Name or number is missing\");return;}var person={name:newName,number:newNumber};var existing=persons.find(function(person){return person.name===newName;});if(existing){if(window.confirm(\"\".concat(existing.name,\" is already added to phonebook, replace the old number with a new one?\"))){var updatablePerson=_objectSpread(_objectSpread({},person),{},{number:newNumber});contactService.update(existing.id,updatablePerson).then(function(returnedPerson){setNewName('');setNewNumber('');setSuccessMessage(\"Updated \".concat(newName));setTimeout(function(){setSuccessMessage(null);},5000);setPersons(persons.map(function(person){return person.id!==existing.id?person:returnedPerson;}));}).catch(function(error){setErrorMessage(\"Information of \".concat(newName,\" has already been removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);setPersons(persons.filter(function(p){return p.id!==person.id;}));});}}else{contactService.create(person).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setSuccessMessage(\"Added \".concat(newName));setTimeout(function(){setSuccessMessage(null);},5000);setPersons(persons.concat(person));}).catch(function(error){setErrorMessage(error.response.data.error);setTimeout(function(){setErrorMessage(null);},5000);});}setNewName('');setNewNumber('');};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleSearch=function handleSearch(event){setSearched(event.target.value);};var handleDelete=function handleDelete(id,name){if(window.confirm(\"Delete \".concat(name,\"?\"))){contactService.remove(id);setErrorMessage(\"Deleted \".concat(name));setTimeout(function(){setErrorMessage(null);},5000);setPersons(persons.filter(function(person){return person.id!==id;}));}};var personsToShow=searched===''?persons:persons.filter(function(person){return person.name.toLocaleLowerCase().includes(searched.toLocaleLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:successMessage,className:\"success\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage,className:\"error\"}),/*#__PURE__*/_jsx(Filter,{searched:searched,handleSearch:handleSearch}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(Add,{addNew:addNew,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,handleDelete:handleDelete})]});};export default App;","map":{"version":3,"names":["useState","useEffect","contactService","Filter","Add","Persons","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searched","setSearched","errorMessage","setErrorMessage","successMessage","setSuccessMessage","getAll","then","initialContacts","addNew","event","preventDefault","length","alert","person","name","number","existing","find","window","confirm","updatablePerson","update","id","returnedPerson","setTimeout","map","catch","error","filter","p","create","concat","response","data","handleNameChange","target","value","handleNumberChange","handleSearch","handleDelete","remove","personsToShow","toLocaleLowerCase","includes"],"sources":["/home/katjaker/FullStack/osa2/puhelinluettelo/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport contactService from './services/contacts'\nimport Filter from './components/Filter'\nimport Add from './components/Add'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searched, setSearched] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n\n  useEffect(() => {\n    contactService\n    .getAll()\n    .then(initialContacts => {\n      setPersons(initialContacts)\n    })\n  }, [])\n\n  const addNew = (event) => {\n    event.preventDefault()\n\n    if (newName.length === 0 || newNumber.length === 0) {\n      alert(\"Name or number is missing\")\n      return\n    }\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n\n    const existing = persons.find(person => person.name === newName)\n    \n    if (existing) {\n      if (window.confirm(`${existing.name} is already added to phonebook, replace the old number with a new one?`)) {\n        const updatablePerson = {...person, number: newNumber}\n        \n        contactService\n          .update(existing.id, updatablePerson)\n          .then(returnedPerson => {\n            setNewName('')\n            setNewNumber('')\n            setSuccessMessage(`Updated ${newName}`)\n            setTimeout(() => {\n              setSuccessMessage(null)\n            }, 5000)\n            setPersons(persons.map(person => person.id !== existing.id ? person : returnedPerson))\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of ${newName} has already been removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n              }, 5000)\n            setPersons(persons.filter(p => p.id !== person.id))          \n        })        \n      }\n      \n    } else {\n\n      contactService\n        .create(person)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n        setSuccessMessage(`Added ${newName}`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n        setPersons(persons.concat(person))\n        })\n        .catch(error => {\n            setErrorMessage(error.response.data.error)\n            setTimeout(() => {\n              setErrorMessage(null)\n              }, 5000)\n        })\n\n    \n  }\n    setNewName('')\n    setNewNumber('')\n}\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {    \n    setSearched(event.target.value)    \n    \n  }\n\n  const handleDelete = (id, name) => {    \n    if (window.confirm((`Delete ${name}?`))) {\n      contactService\n      .remove(id)\n\n      setErrorMessage(`Deleted ${name}`)\n\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      setPersons(persons.filter(person => person.id !==id))\n\n    }\n\n    \n  }\n\n  const personsToShow = searched === '' ? persons : persons.filter((person) => person.name.toLocaleLowerCase().includes(searched.toLocaleLowerCase()));\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={successMessage} className=\"success\"/>\n      <Notification message={errorMessage} className=\"error\"/>\n      <Filter searched={searched} handleSearch={handleSearch}/>\n      \n      <h2>Add a new</h2>\n      <Add addNew={addNew} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n\n      <h2>Numbers</h2>\n        <Persons personsToShow={personsToShow} handleDelete={handleDelete}/>\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}