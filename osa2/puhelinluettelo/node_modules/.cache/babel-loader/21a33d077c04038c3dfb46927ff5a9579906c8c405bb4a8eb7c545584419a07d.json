{"ast":null,"code":"import _objectSpread from\"/home/katjaker/FullStack/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/katjaker/FullStack/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import contactService from'./services/contacts';import Filter from'./components/Filter';import Add from'./components/Add';import Persons from'./components/Persons';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searched=_useState8[0],setSearched=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),successMessage=_useState12[0],setSuccessMessage=_useState12[1];useEffect(function(){contactService.getAll().then(function(initialContacts){setPersons(initialContacts);});},[]);var addNew=function addNew(event){event.preventDefault();var person={name:newName,number:newNumber};if(persons.some(function(person){return person.name===newName;})){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var updatablePerson=persons.find(function(p){return p.name==newName;});var changedPerson=_objectSpread(_objectSpread({},updatablePerson),{},{number:newNumber});contactService.update(changedPerson.id,changedPerson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name!==newName?person:returnedPerson;}));setSuccessMessage(\"Updated \".concat(newName));setTimeout(function(){setSuccessMessage(null);},5000);}).catch(function(error){setErrorMessage(\"Information of \".concat(newName,\" has already been removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);setPersons(persons.filter(function(p){return p.id!==updatablePerson.id;}));setNewName('');setNewNumber('');return;});}setNewName('');setNewNumber('');return;}contactService.create(person).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');});setSuccessMessage(\"Added \".concat(newName));setTimeout(function(){setSuccessMessage(null);},5000);setPersons(persons.concat(person));};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleSearch=function handleSearch(event){setSearched(event.target.value);};var handleDelete=function handleDelete(id,name){if(window.confirm(\"Delete \".concat(name,\"?\"))){contactService.remove(id);setErrorMessage(\"Deleted \".concat(name));setTimeout(function(){setErrorMessage(null);},5000);setPersons(persons.filter(function(person){return person.id!==id;}));}};var personsToShow=searched===''?persons:persons.filter(function(person){return person.name.toLocaleLowerCase().includes(searched.toLocaleLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:successMessage,className:\"success\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage,className:\"error\"}),/*#__PURE__*/_jsx(Filter,{searched:searched,handleSearch:handleSearch}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(Add,{addNew:addNew,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,handleDelete:handleDelete})]});};export default App;","map":{"version":3,"names":["useState","useEffect","axios","contactService","Filter","Add","Persons","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searched","setSearched","errorMessage","setErrorMessage","successMessage","setSuccessMessage","getAll","then","initialContacts","addNew","event","preventDefault","person","name","number","some","window","confirm","updatablePerson","find","p","changedPerson","update","id","returnedPerson","map","setTimeout","catch","error","filter","create","concat","handleNameChange","target","value","handleNumberChange","handleSearch","handleDelete","remove","personsToShow","toLocaleLowerCase","includes"],"sources":["/home/katjaker/FullStack/osa2/puhelinluettelo/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport contactService from './services/contacts'\nimport Filter from './components/Filter'\nimport Add from './components/Add'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searched, setSearched] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n\n  useEffect(() => {\n    contactService\n    .getAll()\n    .then(initialContacts => {\n      setPersons(initialContacts)\n    })\n  }, [])\n\n  const addNew = (event) => {\n    event.preventDefault()\n    const person = {\n      name: newName,\n      number: newNumber\n    }\n    \n    if (persons.some((person) => person.name === newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const updatablePerson = persons.find(p => p.name == newName)\n        const changedPerson = {...updatablePerson, number: newNumber}\n\n        contactService\n        .update(changedPerson.id, changedPerson)\n        .then(returnedPerson => {\n          setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n          setSuccessMessage(`Updated ${newName}`)\n\n          setTimeout(() => {\n          setSuccessMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Information of ${newName} has already been removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n            }, 5000)\n\n          setPersons(persons.filter(p => p.id !== updatablePerson.id))\n          setNewName('')\n          setNewNumber('')\n\n          return\n          \n        })        \n        \n      }\n      setNewName('')\n      setNewNumber('')\n\n      return\n      \n    }\n    contactService\n    .create(person)\n    .then(returnedPerson => {\n      setPersons(persons.concat(returnedPerson))\n    setNewName('')\n    setNewNumber('')\n    })\n\n    setSuccessMessage(`Added ${newName}`)\n\n    setTimeout(() => {\n      setSuccessMessage(null)\n    }, 5000)\n\n    setPersons(persons.concat(person))\n    \n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {    \n    setSearched(event.target.value)    \n    \n  }\n\n  const handleDelete = (id, name) => {    \n    if (window.confirm((`Delete ${name}?`))) {\n      contactService\n      .remove(id)\n\n      setErrorMessage(`Deleted ${name}`)\n\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      setPersons(persons.filter(person => person.id !==id))\n\n    }\n\n    \n  }\n\n  const personsToShow = searched === '' ? persons : persons.filter((person) => person.name.toLocaleLowerCase().includes(searched.toLocaleLowerCase()));\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={successMessage} className=\"success\"/>\n      <Notification message={errorMessage} className=\"error\"/>\n      <Filter searched={searched} handleSearch={handleSearch}/>\n      \n      <h2>Add a new</h2>\n      <Add addNew={addNew} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n\n      <h2>Numbers</h2>\n        <Persons personsToShow={personsToShow} handleDelete={handleDelete}/>\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}